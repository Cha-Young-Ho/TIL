# 동작원리

1. 개발자가 컨테이너를 빌드한다.

2. 도커 명령어로 컨테이너 허브로 업로드한다.
3. 쿠버네티스 명령어로 명령어를 Control-Plane에게 보낸다.
4. 마스터의 API 서버가 명령어를 받고, 스케쥴러에게 노드 배치를 질의한다.
5. 스케쥴러에게 적당한 배치를 받으면, API 서버는 해당 노드 kubelet에게 해당 컨테이너 실행 요청을 한다.
6. kublet은 해당 인스턴스에 실행되어있는 도커 엔진에게 컨테이너 허브에 저장되어있는 이미지를 실행해달라고 요청한다.
7. 도커 엔진은 허브에서 이미지를 내려받아 실행하여 컨테이너를 동작시킨다.
8. 이때 동작된 컨테이너는 _**"파드"**_ 라고 부른다.

# 컴포넌트 살펴보기



## 마스터 컴포넌트

* etcd : 워커 노드에 대한 정보를 key-value 타입으로 저장하고있는 저장소
* kube-apiserver : k8s API를 사용하도록 요청을 받고 요청이 유효한지 검사
* kube-scheduler : 파드를 실행할 노드를 선택
* kube-controller-manager : 파드를 관찰하며 개수를 보장

## 워커 노드 컴포넌트

* kubelet
    * 모든 노드에서 실행되는 k8s 에이전트
    * 데몬 형태로 동작
    * cAdvisor를 통한 상태 관리

* kube-proxy
    * k8s의 network 동작을 관리
    * iptables rule을 구성

* 컨테이너 런타임
    * 컨테이너를 실행하는 엔진(docker, containerd, runc)


# 애드온

* 네트워크 애드온
* dns 애드온
* 대시보드 애드온
* 컨테이너 자원 모니터링
* 클러스터 로깅
    * 컨테이너 로그, k8s 운영 로그들을 수집해서 중앙화
    * ELK 및 EFK 지원

